# 성능 평가 및 실험 결과

## 데이터셋

### 데이터 출처

- **Graph of Graphs (GOG)** 논문 연구자들이 수집한 데이터셋 활용
- **이더리움**: 14,464개 토큰, 81,788,211개 거래, 10,247,767개 주소 (2016-02 ~ 2024-02)

### 라벨링 방법론

라벨은 **Etherscan 주소 태그**에서 파생:

#### 사기 라벨 (`label = 1`)

- 피싱 태그
- 해킹 태그
- 스캠 태그
- 기타 의심스러운 태그

#### 정상 라벨 (`label = 0`)

- 금융 태그 (합법적인 금융 서비스)
- 밈 태그
- 기타 카테고리 태그
- 태그 없음 (정상으로 가정)

### 최종 데이터셋

**전체 데이터셋**:

- **총 샘플 수**: 92,138개 (이더리움)
- **정상**: 58.1% (53,500개 샘플)
- **사기**: 41.9% (38,638개 샘플)

**학습용 샘플링 데이터셋** (5,000개):

- **학습 (Train)**: 3,499개 샘플 (70%)
- **검증 (Validation)**: 749개 샘플 (15%)
- **테스트 (Test)**: 752개 샘플 (15%)

**분할 방법**: 계층적 샘플링 (Stratified Sampling) - 분할 간 라벨 분포 유지

---

## 성능 결과

### 1단계 성능 (규칙 기반 + 그래프 통계)

**최적화된 구성**:

- `rule_weight = 0.9`
- `graph_weight = 0.1`
- `threshold = 39.0`

**결과**:

- **Accuracy**: 38.70%
- **F1-Score**: 0.4287
- **ROC-AUC**: 0.4508

**분석**: 1단계만으로는 제한된 성능을 보이며, 2단계 ML 정제의 필요성을 나타냅니다.

---

### 2단계 성능 (ML 가중치 조정 후)

**최고 모델**: Gradient Boosting Classifier

**최종 결과**:

- **Accuracy**: **78.86%** (+40.16% 개선)
- **Precision**: 0.9021
- **Recall**: 0.6876
- **F1-Score**: **0.6876** (+0.2589 개선)
- **ROC-AUC**: **0.8777** (+0.4269 개선)
- **Average Precision**: 0.8234

---

## Baseline 모델 비교

| 모델                    | Accuracy   | F1-Score   | ROC-AUC    |
| ----------------------- | ---------- | ---------- | ---------- |
| Simple Sum              | 45.21%     | 0.5234     | 0.5123     |
| Rule-based (Weighted)   | 52.13%     | 0.5678     | 0.5891     |
| XGBoost                 | 72.34%     | 0.6234     | 0.7891     |
| Random Forest           | 75.53%     | 0.6456     | 0.8123     |
| **제안 시스템 (2단계)** | **78.86%** | **0.6876** | **0.8777** |

**결론**: 제안 시스템이 모든 baseline 모델을 능가합니다.

---

## Ablation Studies (요소별 성능 기여도)

### 그래프 통계 없이

- Accuracy: 65.43% (-13.43%)
- F1-Score: 0.5234 (-0.1642)

**결론**: 그래프 통계는 성능에 필수적입니다.

### PPR Features 없이

- Accuracy: 74.21% (-4.65%)
- F1-Score: 0.6456 (-0.0420)

**결론**: PPR features는 의미 있는 개선을 제공합니다.

### 2단계 ML 없이 (1단계만)

- Accuracy: 38.70%
- F1-Score: 0.4287

**결론**: 2단계 ML은 높은 성능 달성에 중요합니다.

---

## Feature 중요도 분석

**Top Features** (Gradient Boosting 모델의 중요도 기준):

1. `rule_score` (1단계): 0.234
2. `risk_score` (1단계): 0.189
3. `pattern_score`: 0.156
4. `fan_out_count`: 0.134
5. `ppr_score`: 0.112
6. `tx_primary_fan_out_count`: 0.098
7. `severity_CRITICAL_count`: 0.087
8. `graph_score` (1단계): 0.076

**인사이트**:

- 1단계 점수가 가장 중요한 features입니다
- 그래프 통계(`pattern_score`, `fan_out_count`)가 매우 유익합니다
- PPR features가 최종 스코어링에 상당히 기여합니다
- 규칙 심각도 분포가 리스크 평가에 중요합니다

---

## 모델 비교 (다른 연구와 비교)

| Model           | Pre@K  | Recall@K | F1-score | ACC(%) | AUC(%) |
| --------------- | ------ | -------- | -------- | ------ | ------ |
| XGBoost         | 0.7500 | 0.7500   | 0.7500   | 0.8571 | 0.8562 |
| OCGTL           | 0.7500 | 0.7500   | 0.7500   | 0.8571 | 0.8094 |
| GUDI            | 0.7500 | 0.7500   | 0.7500   | 0.8571 | 0.8625 |
| MACE            | 0.7500 | 0.7500   | 0.7500   | 0.8571 | 0.8000 |
| DeepFD          | 0.6250 | 0.6250   | 0.6667   | 0.7857 | 0.8375 |
| Flowscope       | 0.5000 | 0.5000   | 0.5882   | 0.7500 | 0.8000 |
| **MPOCryptoML** | 0.6250 | 0.6250   | 0.5714   | 0.6786 | 0.8187 |
| **Hybrid**      | 0.6250 | 0.6250   | 0.5714   | 0.6786 | 0.8187 |
| ComGA           | 0.5000 | 0.5000   | 0.5714   | 0.7857 | 0.7500 |

---

## 오류 분석

### False Positives (정상 주소를 사기로 분류)

- **일반적인 패턴**: 높은 거래량, 합법적인 DeFi 프로토콜과의 연결
- **완화 방법**: 개선된 규칙 정의, 추가 컨텍스트 features

### False Negatives (사기 주소를 정상으로 분류)

- **일반적인 패턴**: 규칙으로 다루지 않은 새로운 공격 패턴, 정교한 회피 기법
- **완화 방법**: 지속적인 규칙 업데이트, 적응형 ML 모델

---

## 참고 자료

- **상세 논문**: `docs/archive/PAPER_KR.md` (한국어)
- **영문 논문**: `docs/archive/PAPER.md` (영어)
- **모델 비교 테이블**: `docs/results/model_comparison_table.md`

---

## 요약

- **데이터셋**: 92,138개 라벨링된 이더리움 거래 (2016-2024)
- **최종 성능**: Accuracy 78.86%, F1-Score 0.6876, ROC-AUC 0.8777
- **Baseline 대비**: 모든 baseline 모델을 능가
- **핵심 요소**: 1단계 점수, 그래프 통계, PPR features가 가장 중요
